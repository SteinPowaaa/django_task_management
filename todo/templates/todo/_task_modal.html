<!-- Modal -->
<div class="modal fade" id="taskModal" role="dialog" data-bind="with: projects">
  <!-- ko if: currentProject -->
  <div class="modal-dialog" data-bind="with: currentProject">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="glyphicon glyphicon-remove modal-close" data-dismiss="modal"></button>
        <h4 class="modal-title">Task Properties</h4>
      </div>
      <div class="modal-body">
        Title:
        <div>
          <input class="form-control" type="text"
                 data-bind="value: taskForEdit() && taskForEdit().title">
        </div>

        Description:
        <div>
          <input class="form-control" type="text"
                 data-bind="value: taskForEdit() && taskForEdit().description">
        </div>

        Status:

        <div class="input-group" data-bind="template: { data: taskForEdit, if: taskForEdit }">
          <select class="selectpicker"
                  data-bind="selectPicker: status,
                             optionsText: 'name',
                             optionsValue: 'value',
                             selectPickerOptions: { optionsArray: statuses }">
          </select>
        </div>

        Priority:

        <div class="input-group" data-bind="template: { data: taskForEdit, if: taskForEdit }">
          <select class="selectpicker"
                  data-bind="selectPicker: priority,
                             optionsText: 'name',
                             selectPickerOptions: { optionsArray: priorities },
                             optionsValue: 'value'"></select>
        </div>

        Assignees:

        <div class="input-group">
          <select multiple data-live-search="true"
                  data-bind="selectPicker: taskForEdit() && taskForEdit().assignees,
                             optionsText: 'username',
                             optionsValue:'id',
                             selectPickerOptions: { optionsArray: $root.users }">
          </select>
        </div>

        Task Type:

        <div class="input-group" data-bind="template: { data: taskForEdit, if: taskForEdit }">
          <select class="selectpicker"
                  data-bind="selectPicker: taskType,
                             optionsText: 'name',
                             selectPickerOptions: { optionsArray: taskTypes },
                             optionsValue: 'value'"></select>
        </div>

        <div data-bind="visible: taskForEdit() && taskForEdit().taskType() === 'story'">
          Reference Task:

          <div class="input-group" data-bind="template: { data: taskForEdit, if: taskForEdit }">
            <select class="" data-bind="selectPicker: $parent.taskStory,
                                        optionsText: 'title',
                                        value: refTask"></select>
          </div>
        </div>

        Projects:

        <div class="input-group">
          <select class="" data-bind="selectPicker: taskForEdit() && taskForEdit().project,
                                      optionsText: 'title',
                                      optionsValue: 'id',
                                      selectPickerOptions: { optionsArray: $root.projects.projects }">
          </select>
        </div>

        Sprints:

        <div class="input-group">
          <select class="" data-bind="selectPicker: taskForEdit() && taskForEdit().sprint,
                                      optionsText: 'title',
                                      optionsValue: 'id',
                                      selectPickerOptions: { optionsArray: $root.projects.currentProject().sprints }">
          </select>
        </div>

      </div>
      <div class="modal-footer">
        <input class="btn btn-default" type="submit" value="Submit"
               data-bind="click: taskForEdit() && taskForEdit().submit" data-dismiss="modal">
      </div>
    </div>
  </div>
  <!-- /ko -->
</div>
